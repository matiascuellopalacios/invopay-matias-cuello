<div class="revenue-detail">
  <div class="revenue-detail__container">
    <!-- Header con título y botón volver -->
    <div class="revenue-detail__header">
      <button class="revenue-detail__back-btn" (click)="goBack()">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
          <path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8"/>
        </svg>
      </button>
      <h1 class="revenue-detail__title">{{ 'IP.REVENUE_DETAIL.TITLE' | translate }}</h1>
    </div>

    <!-- Información General -->
    <div class="revenue-detail__info-section">
      <div class="revenue-detail__info-row" [class.revenue-detail__info-row--single]="!revenueDetail?.conciliationData?.isConsolidated">
        <!-- Columna Izquierda - SIEMPRE VISIBLE -->
        <div class="revenue-detail__info-card">
          <h2 class="revenue-detail__info-title">
           <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
            <path d="M14 4.5V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h5.5zm-3 0A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4.5z"/>
          </svg>
            {{ 'IP.REVENUE_DETAIL.TRANSACTION_INFO.TITLE' | translate }}
          </h2>
          
          <div class="revenue-detail__info-grid">
            <div class="revenue-detail__info-item">
              <span class="revenue-detail__info-label">{{ 'IP.REVENUE_DETAIL.TRANSACTION_INFO.REVENUE_DATE' | translate }}</span>
              <span class="revenue-detail__info-value">{{ revenueDetail?.transactionData.revenueDate||'-' }}</span>
            </div>
            
            <div class="revenue-detail__info-item">
              <span class="revenue-detail__info-label">{{ 'IP.REVENUE_DETAIL.TRANSACTION_INFO.CURRENCY' | translate }}</span>
              <span class="revenue-detail__info-value">{{ revenueDetail?.transactionData.currency||'-'}}</span>
            </div>
            
            <div class="revenue-detail__info-item">
              <span class="revenue-detail__info-label">{{ 'IP.REVENUE_DETAIL.TRANSACTION_INFO.PROVIDER' | translate }}</span>
              <span class="revenue-detail__info-value">{{ revenueDetail?.transactionData.paymentProvider|| '-' }}</span>
            </div>
            
            <div class="revenue-detail__info-item">
              <span class="revenue-detail__info-label">{{ 'IP.REVENUE_DETAIL.TRANSACTION_INFO.PAYMENT_CHANNEL' | translate }}</span>
              <span class="revenue-detail__info-value">{{ revenueDetail?.transactionData.paymentChannel|| '-' }}</span>
            </div>
            
            <div class="revenue-detail__info-item">
              <span class="revenue-detail__info-label">{{ 'IP.REVENUE_DETAIL.TRANSACTION_INFO.AMOUNT' | translate }}</span>
              <span class="revenue-detail__info-value">{{  revenueDetail?.transactionData.amount||'-' }}</span>
            </div>
            
            <div class="revenue-detail__info-item">
              <span class="revenue-detail__info-label">{{ 'IP.REVENUE_DETAIL.TRANSACTION_INFO.OBSERVATION' | translate }}</span>
              <span class="revenue-detail__info-value">{{revenueDetail?.transactionData.transactionObservations||  '-'}}</span>
            </div>
          </div>
        </div>

        <!-- Columna Derecha - SOLO SI CONSOLIDADO = SÍ -->
        <div class="revenue-detail__info-card" *ngIf="revenueDetail?.conciliationData?.isConsolidated">
          <h2 class="revenue-detail__info-title">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
              <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6m2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0m4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4m-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664z"/>
            </svg>
            {{ 'IP.REVENUE_DETAIL.CONCILIATION_INFO.TITLE' | translate }}
          </h2>
          
          <div class="revenue-detail__info-grid">
            <div class="revenue-detail__info-item">
              <span class="revenue-detail__info-label">{{ 'IP.REVENUE_DETAIL.CONCILIATION_INFO.PRODUCT' | translate }}</span>
              <span class="revenue-detail__info-value">{{revenueDetail?.conciliationData.productName||'-' }}</span>
            </div>
            
            <div class="revenue-detail__info-item">
              <span class="revenue-detail__info-label">{{ 'IP.REVENUE_DETAIL.CONCILIATION_INFO.BROKER' | translate }}</span>
              <span class="revenue-detail__info-value">{{revenueDetail?.conciliationData.brokerName||'-' }}</span>
            </div>
            
            <div class="revenue-detail__info-item">
              <span class="revenue-detail__info-label">{{ 'IP.REVENUE_DETAIL.CONCILIATION_INFO.CONSOLIDATED' | translate }}</span>
              <span class="revenue-detail__info-value">{{isConsolidated()||'-' }}</span>
            </div>

            <div class="revenue-detail__info-item">
              <span class="revenue-detail__info-label">{{ 'IP.REVENUE_DETAIL.CONCILIATION_INFO.POLICY' | translate }}</span>
              <span class="revenue-detail__info-value">{{ revenueDetail?.conciliationData.policyNumber||'-' }}</span>
            </div>
            
            <div class="revenue-detail__info-item">
              <span class="revenue-detail__info-label">{{ 'IP.REVENUE_DETAIL.CONCILIATION_INFO.NUMBER_PAYMENTS' | translate }}</span>
              <span class="revenue-detail__info-value">{{revenueDetail?.conciliationData.paymentNumber||'-' }}</span>
            </div>

            <div class="revenue-detail__info-item">
              <span class="revenue-detail__info-label">{{ 'IP.REVENUE_DETAIL.CONCILIATION_INFO.AMOUNT' | translate }}</span>
              <span class="revenue-detail__info-value">{{revenueDetail?.conciliationData.policyAmount||'-' }}</span>
            </div>

            <div class="revenue-detail__info-item">
              <span class="revenue-detail__info-label">{{ 'IP.REVENUE_DETAIL.CONCILIATION_INFO.PAYMENT_VALUE' | translate }}</span>
              <span class="revenue-detail__info-value">{{revenueDetail?.conciliationData.paymentValue||'-' }}</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Plan de Pago de la Prima - SOLO SI CONSOLIDADO = SÍ -->
    <div class="revenue-detail__payment-section" *ngIf="revenueDetail?.conciliationData?.isConsolidated">
      <h2 class="revenue-detail__payment-title">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
            <path d="M14 4.5V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h5.5zm-3 0A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4.5z"/>
          </svg>
        {{ 'IP.REVENUE_DETAIL.POLICY_INFO.TITLE' | translate }}
      </h2>

      
          <div class="revenue-detail__info-grid">
            <div class="revenue-detail__info-item">
              <span class="revenue-detail__info-label">{{ 'IP.REVENUE_DETAIL.POLICY_INFO.SALE_DATE' | translate }}</span>
              <span class="revenue-detail__info-value">{{ revenueDetail?.policyData.saleDate||'-' }}</span>
            </div>
            
            <div class="revenue-detail__info-item">
              <span class="revenue-detail__info-label">{{ 'IP.REVENUE_DETAIL.POLICY_INFO.PREMIUM_AMOUNT' | translate }}</span>
              <span class="revenue-detail__info-value">{{ revenueDetail?.policyData.premiumAmount||'-'}}</span>
            </div>
            
            <div class="revenue-detail__info-item">
              <span class="revenue-detail__info-label">{{ 'IP.REVENUE_DETAIL.POLICY_INFO.POLICY_NUMBER' | translate }}</span>
              <span class="revenue-detail__info-value">{{ revenueDetail?.policyData.number|| '-' }}</span>
            </div>
            
            <div class="revenue-detail__info-item">
              <span class="revenue-detail__info-label">{{ 'IP.REVENUE_DETAIL.POLICY_INFO.POLICY_AMOUNT' | translate }}</span>
              <span class="revenue-detail__info-value">{{ revenueDetail?.policyData.amount|| '-' }}</span>
            </div>
            
            <div class="revenue-detail__info-item">
              <span class="revenue-detail__info-label">{{ 'IP.REVENUE_DETAIL.POLICY_INFO.PRODUCT' | translate }}</span>
              <span class="revenue-detail__info-value">{{  revenueDetail?.policyData.productName||'-' }}</span>
            </div>
          </div>
      <h3 class="revenue-detail__payment-title">{{'IP.REVENUE_DETAIL.TABLE.TITTLE'|translate}}</h3>
      <div class="revenue-detail__table-wrapper">
        <app-table
          *ngIf="titlesFile && titlesFile.size > 0 && paginatedData && paginatedData.length > 0"
          [data]="paginatedData"
          [initTable]="false"
          [propertyOrder]="columns"
          [titlesFile]="titlesFile"
          keyTranslate=""
          [scroll]="true"
          [tableStyle]="tableStyle">
        </app-table>
        
        <app-no-data 
          *ngIf="titlesFile && titlesFile.size > 0 && (!paginatedData || paginatedData.length === 0)">
        </app-no-data>
      </div>

      <!-- Paginador -->
      <div class="revenue-detail__paginator-container" *ngIf="paginatedData && paginatedData.length > 0">
        <div class="revenue-detail__rows-per-page">
          <span>{{ 'IP.REVENUE_DETAIL.ROWS_PER_PAGE' | translate }}</span>
          <select class="revenue-detail__rows-select" [(ngModel)]="itemsPerPage" (ngModelChange)="onItemsPerPageChange($event)">
            <option [value]="5">5</option>
            <option [value]="10">10</option>
            <option [value]="25">25</option>
            <option [value]="50">50</option>
            <option [value]="100">100</option>
          </select>
        </div>
        
        <app-paginator 
          *ngIf="showPaginator"
          class="revenue-detail__paginator"
          [totalItems]="totalItems"
          [itemsPerPage]="itemsPerPage"
          [currentPages]="currentPages"
          (pageChange)="onPageChange($event)">
        </app-paginator>
      </div>
    </div>
  </div>
</div>