<div class="revenue-detail">
  <div class="revenue-detail__container">
    <!-- Header con título y botón volver -->
    <div class="revenue-detail__header">
      <button class="revenue-detail__back-btn" (click)="goBack()">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16">
          <path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8"/>
        </svg>
      </button>
      <h1 class="revenue-detail__title">{{ 'IP.REVENUE_DETAIL.TITLE' | translate }}</h1>
    </div>

    <!-- Información General -->
    <div class="revenue-detail__info-section">
      <div class="revenue-detail__info-row" [class.revenue-detail__info-row--single]="!revenueDetail?.conciliationData?.isConsolidated">
        <!-- Columna Izquierda - SIEMPRE VISIBLE -->
        <div class="revenue-detail__info-card">
          <h2 class="revenue-detail__info-title">
           <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
            <path d="M14 4.5V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h5.5zm-3 0A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4.5z"/>
          </svg>
            {{ 'IP.REVENUE_DETAIL.TRANSACTION_INFO.TITLE' | translate }}
          </h2>
          
          <div class="revenue-detail__info-grid">
            <div class="revenue-detail__field">
              <label class="revenue-detail__field-label">{{ 'IP.REVENUE_DETAIL.TRANSACTION_INFO.REVENUE_DATE' | translate }}</label>
              <input type="text" [formControl]="revenueDateControl" class="revenue-detail__field-input" readonly>
            </div>
            
            <div class="revenue-detail__field">
              <label class="revenue-detail__field-label">{{ 'IP.REVENUE_DETAIL.TRANSACTION_INFO.CURRENCY' | translate }}</label>
              <input type="text" [formControl]="currencyControl" class="revenue-detail__field-input" readonly>
            </div>
            
            <div class="revenue-detail__field">
              <label class="revenue-detail__field-label">{{ 'IP.REVENUE_DETAIL.TRANSACTION_INFO.PROVIDER' | translate }}</label>
              <input type="text" [formControl]="providerControl" class="revenue-detail__field-input" readonly>
            </div>
            
            <div class="revenue-detail__field">
              <label class="revenue-detail__field-label">{{ 'IP.REVENUE_DETAIL.TRANSACTION_INFO.PAYMENT_CHANNEL' | translate }}</label>
              <input type="text" [formControl]="paymentChannelControl" class="revenue-detail__field-input" readonly>
            </div>
            
            <div class="revenue-detail__field">
              <label class="revenue-detail__field-label">{{ 'IP.REVENUE_DETAIL.TRANSACTION_INFO.AMOUNT' | translate }}</label>
              <input type="text" [formControl]="transactionAmountControl" class="revenue-detail__field-input" readonly>
            </div>
            
            <div class="revenue-detail__field revenue-detail__field--textarea">
              <label class="revenue-detail__field-label">{{ 'IP.REVENUE_DETAIL.TRANSACTION_INFO.OBSERVATION' | translate }}</label>
              <textarea [formControl]="observationControl" class="revenue-detail__field-input revenue-detail__field-textarea" readonly rows="2"></textarea>
            </div>
          </div>
        </div>

        <!-- Columna Derecha - SOLO SI CONSOLIDADO = SÍ -->
        <div class="revenue-detail__info-card" *ngIf="revenueDetail?.conciliationData?.isConsolidated">
          <h2 class="revenue-detail__info-title">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
              <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6m2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0m4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4m-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664z"/>
            </svg>
            {{ 'IP.REVENUE_DETAIL.CONCILIATION_INFO.TITLE' | translate }}
          </h2>
          
          <div class="revenue-detail__info-grid">
            <div class="revenue-detail__field">
              <label class="revenue-detail__field-label">{{ 'IP.REVENUE_DETAIL.CONCILIATION_INFO.PRODUCT' | translate }}</label>
              <input type="text" [formControl]="productNameControl" class="revenue-detail__field-input" readonly>
            </div>
            
            <div class="revenue-detail__field">
              <label class="revenue-detail__field-label">{{ 'IP.REVENUE_DETAIL.CONCILIATION_INFO.BROKER' | translate }}</label>
              <input type="text" [formControl]="brokerNameControl" class="revenue-detail__field-input" readonly>
            </div>
            
            <div class="revenue-detail__field">
              <label class="revenue-detail__field-label">{{ 'IP.REVENUE_DETAIL.CONCILIATION_INFO.CONSOLIDATED' | translate }}</label>
              <input type="text" [formControl]="isConsolidatedControl" class="revenue-detail__field-input" readonly>
            </div>

            <div class="revenue-detail__field">
              <label class="revenue-detail__field-label">{{ 'IP.REVENUE_DETAIL.CONCILIATION_INFO.POLICY' | translate }}</label>
              <input type="text" [formControl]="policyNumberControl" class="revenue-detail__field-input" readonly>
            </div>
            
            <div class="revenue-detail__field">
              <label class="revenue-detail__field-label">{{ 'IP.REVENUE_DETAIL.CONCILIATION_INFO.NUMBER_PAYMENTS' | translate }}</label>
              <input type="text" [formControl]="paymentNumberControl" class="revenue-detail__field-input" readonly>
            </div>

            <div class="revenue-detail__field">
              <label class="revenue-detail__field-label">{{ 'IP.REVENUE_DETAIL.CONCILIATION_INFO.AMOUNT' | translate }}</label>
              <input type="text" [formControl]="policyAmountControl" class="revenue-detail__field-input" readonly>
            </div>

            <div class="revenue-detail__field">
              <label class="revenue-detail__field-label">{{ 'IP.REVENUE_DETAIL.CONCILIATION_INFO.PAYMENT_VALUE' | translate }}</label>
              <input type="text" [formControl]="paymentValueControl" class="revenue-detail__field-input" readonly>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Plan de Pago de la Prima - SOLO SI CONSOLIDADO = SÍ -->
    <div class="revenue-detail__payment-section" *ngIf="revenueDetail?.conciliationData?.isConsolidated">
      <h2 class="revenue-detail__payment-title">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
            <path d="M14 4.5V14a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V2a2 2 0 0 1 2-2h5.5zm-3 0A1.5 1.5 0 0 1 9.5 3V1H4a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4.5z"/>
          </svg>
        {{ 'IP.REVENUE_DETAIL.POLICY_INFO.TITLE' | translate }}
      </h2>

      
          <div class="revenue-detail__info-grid revenue-detail__info-grid--policy">
            <div class="revenue-detail__field">
              <label class="revenue-detail__field-label">{{ 'IP.REVENUE_DETAIL.POLICY_INFO.SALE_DATE' | translate }}</label>
              <input type="text" [formControl]="saleDateControl" class="revenue-detail__field-input" readonly>
            </div>
            
            <div class="revenue-detail__field">
              <label class="revenue-detail__field-label">{{ 'IP.REVENUE_DETAIL.POLICY_INFO.PREMIUM_AMOUNT' | translate }}</label>
              <input type="text" [formControl]="premiumAmountControl" class="revenue-detail__field-input" readonly>
            </div>
            
            <div class="revenue-detail__field">
              <label class="revenue-detail__field-label">{{ 'IP.REVENUE_DETAIL.POLICY_INFO.POLICY_NUMBER' | translate }}</label>
              <input type="text" [formControl]="policyNumControl" class="revenue-detail__field-input" readonly>
            </div>
            
            <div class="revenue-detail__field">
              <label class="revenue-detail__field-label">{{ 'IP.REVENUE_DETAIL.POLICY_INFO.POLICY_AMOUNT' | translate }}</label>
              <input type="text" [formControl]="policyAmtControl" class="revenue-detail__field-input" readonly>
            </div>
            
            <div class="revenue-detail__field">
              <label class="revenue-detail__field-label">{{ 'IP.REVENUE_DETAIL.POLICY_INFO.PRODUCT' | translate }}</label>
              <input type="text" [formControl]="productControl" class="revenue-detail__field-input" readonly>
            </div>
          </div>
      <h3 class="revenue-detail__payment-title">{{'IP.REVENUE_DETAIL.TABLE.TITTLE'|translate}}</h3>
      
      <!-- Table - Desktop -->
      <div class="revenue-detail__table-wrapper revenue-detail__table-wrapper--desktop">
        <app-table
          *ngIf="titlesFile && titlesFile.size > 0 && paginatedData && paginatedData.length > 0"
          [data]="paginatedData"
          [initTable]="false"
          [propertyOrder]="columns"
          [titlesFile]="titlesFile"
          keyTranslate=""
          [scroll]="true"
          [tableStyle]="tableStyle">
        </app-table>
        
        <app-no-data 
          *ngIf="titlesFile && titlesFile.size > 0 && (!paginatedData || paginatedData.length === 0)">
        </app-no-data>
      </div>

      <!-- Cards - Mobile -->
      <div class="revenue-detail__cards-container revenue-detail__cards-container--mobile">
        <app-mobile-card-list
          [data]="paginatedData"
          [config]="mobileCardConfig"
          [showNoData]="!paginatedData || paginatedData.length === 0">
          <app-no-data no-data></app-no-data>
        </app-mobile-card-list>
      </div>
    </div>
  </div>
</div>