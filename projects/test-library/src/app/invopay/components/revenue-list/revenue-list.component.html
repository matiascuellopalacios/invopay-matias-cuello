<div class="revenue-list">
  <div class="revenue-list__card">
    <!-- Title Section -->
    <div class="revenue-list__title-section">
      <h1 class="revenue-list__title">{{ 'IP.REVENUE_LIST.TITLE' | translate }}</h1>
      <button type="button" class="revenue-list__mobile-filter-btn" (click)="openMobileFilters()">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
          <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
        </svg>
        {{ 'IP.REVENUE_LIST.FILTERS_TITLE' | translate }}
      </button>
    </div>

    <!-- Filters Section -->
    <div class="revenue-list__filters">
      <div class="revenue-list__filters-container">
       <div class="revenue-list__filter-group">
  <label for="fecha-desde" class="revenue-list__filter-label">{{ 'IP.REVENUE_LIST.FILTERS.DATE_FROM' | translate }}</label>
  <input 
    type="date" 
    id="fecha-desde" 
    class="revenue-list__filter-input" 
    [(ngModel)]="dateFrom"
    [max]="maxDate"
    (change)="onDateFromChange($event)"/>
</div>

<div class="revenue-list__filter-group">
  <label for="fecha-hasta" class="revenue-list__filter-label">{{ 'IP.REVENUE_LIST.FILTERS.DATE_TO' | translate }}</label>
  <input 
    type="date" 
    id="fecha-hasta" 
    class="revenue-list__filter-input" 
    [(ngModel)]="dateTo"
    [min]="minDateTo"
    [max]="maxDate"
    (change)="onDateToChange($event)"/>
</div>
        
        <div class="revenue-list__filter-actions">
          <button class="btn btn--search" (click)="onSearch()" [disabled]="isSearchDisabled" [class.btn--disabled]="isSearchDisabled">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
              <path [attr.stroke]="isSearchDisabled ? '#CBD5E0' : 'white'" d="M7 13A6 6 0 1 0 7 1a6 6 0 0 0 0 12zM15 15l-4-4" stroke-width="2" stroke-linecap="round"/>
            </svg>
          </button>
          <button class="btn btn--filter" (click)="openFilters()" [class.btn--disabled]="!hasSearched"  [disabled]="!hasSearched">
            <img src="../../../assets/icons/filter3.svg" alt="Filtro" class="revenue-list__filters-icon">
          </button>
        </div>
      </div>
    </div>

    <!-- Table Container -->
    <!-- Table Container - Desktop -->
    <div class="revenue-list__table-container revenue-list__table-container--desktop">
      <div class="revenue-list__body">
        <div>
          <app-table
            *ngIf="titlesFile && titlesFile.size > 0 && paginatedData && paginatedData.length > 0"
            [data]="paginatedData"
            [initTable]="false"
            [propertyOrder]="columns"
            [titlesFile]="titlesFile"
            [actions]="actions"
            keyTranslate = 'IP.ADMIN_TABLE'
            [scroll]="true"
            [tableStyle]="tableStyle"
            (action)="onTableAction($event)"
            (sort)="onTableSort($event)">
            
          </app-table>
          
          <app-no-data 
            *ngIf="titlesFile && titlesFile.size > 0 && (!paginatedData || paginatedData.length === 0)">
          </app-no-data>
        </div>
      </div>

      <!-- Paginator Section - Desktop -->
      <div class="revenue-list__paginator-container revenue-list__paginator-container--desktop" *ngIf="paginatedData && paginatedData.length > 0">
        <div class="revenue-list__rows-per-page">
          <select class="revenue-list__rows-select" [(ngModel)]="itemsPerPage" (ngModelChange)="onItemsPerPageChange($event)">
            <option [value]="10">10</option>
            <option [value]="25">25</option>
            <option [value]="50">50</option>
            <option [value]="100">100</option>
          </select>
        </div>
        
         <app-paginator 
      *ngIf="showPaginator"
      class="revenue-list__paginator"
      [totalItems]="totalItems"
      [itemsPerPage]="itemsPerPage"
      [currentPages]="currentPages"
      (pageChange)="onPageChange($event)">
    </app-paginator>
      </div>
    </div>

    <!-- Cards Container - Mobile -->
    <div class="revenue-list__cards-container revenue-list__cards-container--mobile">
      <app-mobile-card-list
        [data]="paginatedData"
        [config]="mobileCardConfig"
        [showNoData]="!paginatedData || paginatedData.length === 0"
        (cardAction)="onMobileCardAction($event)">
        <app-no-data no-data></app-no-data>
      </app-mobile-card-list>

      <!-- Paginator Section - Mobile -->
      <div class="revenue-list__paginator-container revenue-list__paginator-container--mobile" *ngIf="paginatedData && paginatedData.length > 0">
        <div class="revenue-list__rows-per-page">
          <select class="revenue-list__rows-select" [(ngModel)]="itemsPerPage" (ngModelChange)="onItemsPerPageChange($event)">
            <option [value]="10">10</option>
            <option [value]="25">25</option>
            <option [value]="50">50</option>
            <option [value]="100">100</option>
          </select>
        </div>
        
         <app-paginator 
      *ngIf="showPaginator"
      class="revenue-list__paginator"
      [totalItems]="totalItems"
      [itemsPerPage]="itemsPerPage"
      [currentPages]="currentPages"
      (pageChange)="onPageChange($event)">
    </app-paginator>
      </div>
    </div>
  </div>
</div>

<!-- Modal de filtros adicionales (Canal de Pago) -->
<app-additional-filters-modal
  [open]="showFiltersModal"
  [title]="'IP.SELLS_LIST.MODAL.TITTLE' | translate"
  [clearLabel]="'IP.SELLS_LIST.MODAL.CLEAR' | translate"
  [cancelLabel]="'IP.SELLS_LIST.MODAL.CANCEL' | translate"
  [applyLabel]="'IP.SELLS_LIST.MODAL.APPLY' | translate"
  (openChange)="showFiltersModal = $event"
  (clear)="onClearFilters()"
  (cancel)="closeFilters()"
  (apply)="applyModalFilters()">
  
  <div class="filters-row-modal">
    <div class="filter-group-modal filter-group-modal--floating">
      <label for="producto-modal" class="filter-label-modal--floating">{{ 'IP.REVENUE_LIST.FILTERS.PAYMEN_CHANNEL' | translate }}</label>
      <select id="producto-modal" class="filter-select-modal--floating" [(ngModel)]="selectedPaymentChannel">
        <option value="">{{ 'IP.REVENUE_LIST.PAYMENT_PLAYCEHOLDER' | translate }}</option>
        <option value="BOLETO">{{ 'IP.REVENUE_LIST.PAYMENT_CHANNELS.TICKET' | translate }}</option>
        <option value="TARJETA">{{ 'IP.REVENUE_LIST.PAYMENT_CHANNELS.CARD' | translate }}</option>
        <option value="CHEQUE">{{ 'IP.REVENUE_LIST.PAYMENT_CHANNELS.BANK_TRANSFER' | translate }}</option>
        <option value="TRANSFERENCIA">{{ 'IP.REVENUE_LIST.PAYMENT_CHANNELS.CHECK' | translate }}</option>
      </select>
    </div>
  </div>
</app-additional-filters-modal>

<!-- Modal mobile con fechas -->
<app-mobile-date-filters-modal
  [open]="showMobileFiltersModal"
  [title]="'IP.REVENUE_LIST.FILTERS.TITLE' | translate"
  (openChange)="showMobileFiltersModal = $event">
  
  <div class="mobile-filters-content">
    <div class="revenue-list__filter-group">
      <label for="fecha-desde-mobile" class="revenue-list__filter-label">{{ 'IP.REVENUE_LIST.FILTERS.DATE_FROM' | translate }}</label>
      <input 
        type="date" 
        id="fecha-desde-mobile"
        class="revenue-list__filter-input"
        [(ngModel)]="dateFrom"
        [max]="maxDate"
        (change)="onDateFromChange($event)"/>
    </div>

    <div class="revenue-list__filter-group">
      <label for="fecha-hasta-mobile" class="revenue-list__filter-label">{{ 'IP.REVENUE_LIST.FILTERS.DATE_TO' | translate }}</label>
      <input 
        type="date" 
        id="fecha-hasta-mobile"
        class="revenue-list__filter-input"
        [(ngModel)]="dateTo"
        [min]="minDateTo"
        [max]="maxDate"
        (change)="onDateToChange($event)"/>
    </div>
    
    <div class="mobile-filters-content__actions">
      <button class="btn btn--search" (click)="onSearch()" [disabled]="isSearchDisabled">
        <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
          <path [attr.stroke]="isSearchDisabled ? '#CBD5E0' : 'white'" d="M7 13A6 6 0 1 0 7 1a6 6 0 0 0 0 12zM15 15l-4-4" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </button>
      <button class="btn btn--filter" (click)="openFilters()" [disabled]="!hasSearched">
        <img src="../../../assets/icons/filter3.svg" alt="Filtro" class="revenue-list__filters-icon">
      </button>
    </div>
  </div>
</app-mobile-date-filters-modal>